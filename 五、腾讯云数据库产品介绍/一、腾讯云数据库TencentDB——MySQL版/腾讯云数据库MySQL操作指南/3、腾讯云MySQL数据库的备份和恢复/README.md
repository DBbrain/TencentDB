# 腾讯云MySQL数据库的备份和恢复
腾讯云数据库MySQL支持自动备份和手动备份两种备份方式。从备份类型上来看，可以分为两种一种是物理备份，即物理数据全拷贝；一种是逻辑备份，即SQL语句的备份。除逻辑备份只支持手动备份外，物理备份自动备份和手动备份均可。下面我们来看一下这两种备份类型对比：
<table>
    <tr>
        <th></th>
        <th>物理备份</th>
        <th>逻辑备份</th>
    </tr>
    <tr>
        <td>备份速度</td>
        <td>快</td>
        <td>需要执行sql和构建索引，速度较慢，备份过程中对实例造成压力，会加大主从延迟</td>
    </tr>
    <tr>
        <td>备份成功率</td>
        <td>高</td>
        <td>由于各种问题（错误视图等），可能导致备份失败</td>
    </tr>
    <tr>
        <td>可操作性</td>
        <td>较为简单</td>
        <td>需要执行sql和构建索引，相对复杂</td>
    </tr>
</table>
对比来看，物理备份是更优的选择，下面我们来分别讲一下如何自动备份和手动备份MySQL数据。

## 1、自动备份
1.在MySQL列表中，点击管理，进入数据库管理页面，选择【备份恢复】> 【自动备份设置】
<img src='../../../../Gallerys/tencentdb5-17.jpg'>

2.在弹出框中配置各项参数，点击【确定】即可完成备份：

(1)	备份周期：一般情况下，一周至少备份两次

(2)	备份时间：可自定义设置备份时间区间

(3)	数据备份保留时间：数据备份文件可以保留7天 - 732天，默认为7天。

(4)	日志备份保留时间：日志备份文件可以保留7天 - 732天，默认为7天。日志备份天数必须小于等于数据备份天数。
<img src='../../../../Gallerys/tencentdb5-18.jpg'>

## 2、手动备份MySQL数据
1.在MySQL列表中，点击管理，进入数据库管理页面，选择【备份恢复】> 【自动备份设置】

2.在弹出的备份设置对话框，选择备份方式和对象，单击【确定】即可完成手动备份
<img src='../../../../Gallerys/tencentdb5-19.jpg'>

腾讯云数据库管理平台还提供了备份空间管理功能，你可以在概览页上对备份总计、备份趋势、备份统计进行查看，方便你随时随地监控自己的备份空间。
<img src='../../../../Gallerys/tencentdb5-20.jpg'>

数据备份好之后，让我们来一起看一下如何使用备份文件恢复数据库，上面我们提到备份有逻辑备份和物理备份两种，同样的这两种的恢复方式也不一样。

## 3、物理备份恢复数据
1.下载备份文件
(1)	通过管理台手动下载：登陆MySQL控制台，在实例管理页选择【备份恢复】>【数据备份列表】页， 选择需要下载的备份，在操作列单击【下载】

(2)	通过wget命令进行下载：<br/>
wget -c '备份文件下载地址' -O 自定义文件名.xb
<img src='../../../../Gallerys/tencentdb5-21.jpg'>

2.解包备份文件

(1)	使用 xbstream 命令将备份文件解包到目标目录。

(2)	xbstream -x -C /data < ~/test.xb
<ul>
    <li>本文目标目录以/data为例，您可根据实际情况替换为实际路径。</li>
    <li>~/test.xb替换为您的备份文件。</li>
</ul>
解包结果如下图所示：
<img src='../../../../Gallerys/tencentdb5-22.jpg'>






