# 腾讯云MongoDB数据库的备份和恢复
## 1、数据库备份
云数据库 MongoDB 默认每日进行自动备份，用户也可以进行手动备份。本文为您介绍通过控制台备份云数据库 MongoDB 的操作：

1.自动备份

(1)	登录 云数据库 MongoDB 控制台，在实例列表页，单击实例名进入管理页面，选择【备份与回档】>【自动备份设置】页，单击【编辑】。

(2)	选择备份参数，单击【保存】。参数说明如下：
<table>
    <tr>
        <th width=200>参数</th>
        <th>说明</th>
    </tr>
    <tr>
        <td>数据备份保留</td>
        <td>默认保留7天。目前免费，后续备份空间收费将另行通知。</td>
    </tr>
    <tr>
        <td>备份方式</td>
        <td>支持物理备份和逻辑备份。默认为物理备份。</td>
    </tr>
    <tr>
        <td>备份时间间隔</td>
        <td>支持每12小时备份一次和每24小时备份一次。默认为24小时，即每天备份一次。</td>
    </tr>
    <tr>
        <td>备份开始时间</td>
        <td>支持不同时间段。默认开始时间为01:00-02:00，即系统会在每天01:00-02:00时间段内开始备份任务。具体的开始时间会随着备份任务具体调度而变化。当备份时间间隔为每12小时一次，则备份开始时间为首次备份开始时间。</td>
    </tr>
    <tr>
        <td>备份异常是否通知</td>
        <td>指备份任务执行异常时是否通知用户。通知方式为腾讯云监控事件，目前 MongoDB 的事件通知为白名单方式。</td>
    </tr>
</table>

2.手动备份

(1)	在管理页面的右上角单击【手动备份】。

(2)	在弹出的对话框选择备份方式，为增加区分度，请添加备注信息，单击【确认】即可。

## 2、数据恢复
下面介绍通过控制台恢复云数据库 MongoDB 数据的操作：

1.登录云数据库 MongoBD 控制台 ，在实例列表中，单击实例名进入实例管理页面。

2.选择【备份与回档】>【备份恢复】页，在需要回档的备份文件列，单击【回档实例】。

3.在回档页，可选择回档的时间点，以及回档类型。回档类型包括整实例回档和库表回档。

4.选择【整实例回档】时，系统为您免费创建了一个临时实例，用于存放回档数据，临时实例的用户名和密码与原实例一致。原实例保持不变，不会对业务造成任何影响。

5.注意：整实例回档在回档完成后的48小时内，用户需要访问临时实例确认回档数据。对于临时实例您可选择以下操作：
* “转正”：将临时实例转为独立于原实例的正式实例，供业务使用。
* “替换”：用临时实例替换掉原实例（原实例内网 IP 绑定到临时实例）。
* 如果超过48小时不处理，系统将销毁临时实例。
* 选择【库表回档】时，系统会根据用户所选库表、回档后库表名称和回档时间在原实例进行回档。回档完成后，请及时确认回档数据。

说明：由于物理备份不支持库表回档，所以当前备份列表中有物理备份时回档时，不能选择库表回档。
单个库表回档任务当前只支持20个库表。版本为3.6的分片集群不支持库表回档。
