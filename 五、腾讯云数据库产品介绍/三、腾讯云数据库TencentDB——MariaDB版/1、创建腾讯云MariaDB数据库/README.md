# 创建腾讯云MariaDB数据库
## 1、创建实例
1.登录MariaDB 控制台，单击【新建】进入购买页。

2.根据需求指定数据库实例信息，单击【立即购买】。

(1)	计费模式：支持包年包月。

(2)	地域：实例部署的地域，建议与需要对接的云服务器保持一致。

(3)	可用区：在同一地域内电力和网络互相独立的物理数据中心，建议与需要对接的云服务器保持一致。

(4)	网络类型：实例所处的网络，建议与需要对接的云服务器保持一致。VPC 网络选择后不可更改。

(5)	实例版本：详见实例版本，备机越多，可用性越高。

(6)	数据库版本：MariaDB（TDSQL）的数据库内核版本，10.0.10与10.1.9存在功能差异，详见 MariaDB 官方说明。

(7)	实例规格：实例规格代表不同的性能水平和价格基数。

(8)	硬盘：默认采用SSD盘（本地盘）。

(9)	指定项目：如需不同团队管理不同数据库，请指定到不同团队所处的项目。

(10) 购买数量：一次性可购买的实例个数，为避免误操作，一次购买设有上限，如需更多个数，请多次购买。

3.在核对信息页确认无误后，单击【确认购买】进行支付。

4.支付完成后，返回 MariaDB 实例列表，待实例状态变为【未初始化】，即可进行实例初始化操作。

## 2、初始化实例

1.登录MariaDB 控制台，在实例列表选择状态为【未初始化】的实例，在操作列选择【更多】>【初始化】。

2.在弹出的对话框，配置初始化参数，单击【确认】开始初始化。

(1)	支持的字符集：选择 MariaDB 数据库支持的字符集。

(2)	表名大小写敏感：表名是否大小写敏感，默认为是。

(3)	开启强同步：开启强同步可以保证在主机故障时备机数据的一致性。

3.返回实例列表，待实例状态变为【运行中】，表明初始化成功。

## 3、创建账号

创建账号用于连接 MariaDB 实例，下面为您介绍通过云数据库 MariaDB 控制台创建账号，以及修改账号权限的操作。

暂不支持通过命令行insert into mysql.user、grant、drop创建、修改账号。

### 3.1、创建账号

1.登录MariaDB 控制台，单击实例名或操作列的【管理】，进入实例管理页面。

2.选择【账号管理】页，单击【创建账号】。

3.在弹出的对话框，输入账号名、主机、密码、备注，确认无误后单击【确认】。

(1)	主机：可理解为 HOST，支持 IP、IP 段、%三种形式；%代表结尾符，例如，要支持10.10.10.1 - 10.10.10.254的所有主机IP，可以输入10.10.10.%。

(2)	是否为只读帐号：选中表示该账号只能使用读请求（select）。

4.说明：同一个账号名不同的主机 IP 需要独立设置权限，可通过账号管理中【克隆账号】功能，快速克隆相似的账号以及设置权限。

### 3.2、设置权限

1.在账号管理页，单击操作列的【修改权限】。

2.在弹出的对话框，根据需求分配权限后，单击【保存设置】即可完成权限分配。

3.MariaDB 的权限为对象级权限，权限包括数据库常见的19种权限，可以为表、视图、函数、触发器等对象设置权限。
<br>说明：未创建数据库时，无法设置对象级别权限。

## 4、访问云数据库
访问云数据库 MariaDB 的方式如下：

<ul>
    <li>内网访问：使用云服务器 CVM 访问自动分配给云数据库的内网地址。CVM 和云数据库要在同一地域、同一账号且同一网络类型（都是基础网络或都在同一个私有网络 VPC）。</li>
    <li>外网访问：在外网的 Windows 或者 Linux 主机中，安装数据库客户端来访问云数据库 MariaDB 的外网地址。</li>
</ul>

下面我们来一起看一下通过上面的两种方式如何访问云数据库。

### 4.1、内网访问

1.登录到 CVM。

2.根据 CVM 的操作系统选择连接方式。

(1)	从 Windows 系统登录

(2)	下载并安装 MariadDB 的客户端，推荐下载 sqlyog。

(3)	打开 sqlyog，输入 MariaDB 数据库实例的内网 IP 和端口号，数据库帐号以及密码。
<ul>
    <li>我的SQL主机地址：内网 IP。</li>
    <li>用户名：前提条件中创建的用户名。</li>
    <li>密码：用户名对应的密码。</li>
    <li>端口：内网 IP对应的端口。</li>
</ul> 

3.以 CentOS 7.2 64位系统的 CVM 为例，利用 CentOS 自带的包管理软件 Yum 去腾讯云的镜像源下载安装 MySQL 客户端。
<br/>执行以下命令安装客户端：
```apacheconfig
yum install mysql
mysql -h hostname -u username -p
请将 hostname 替换为目标 MariaDB 数据库实例的内网 IP 地址，username 替换为之前创建的用户名，并在提示Enter password：后输入用户名对应的密码。
```
4.在 MySQL> 提示符下可以发送 SQL 语句到要执行的 MariaDB 服务器，具体命令行请参见<a href="https://dev.mysql.com/doc/refman/5.7/en/mysql-commands.html">此网站</a>。

### 4.2、外网访问

1.获取数据库的外网地址。

(1)	登录MariaDB 控制台，单击实例名或操作列的【管理】。

(2)	在实例详情页，单击外网地址后的【开启】，开启外网地址。 
 
2.登录到数据库。

(1)	从 Windows 系统登录

下载 MariaDB 客户端并安装，推荐您 下载 sqlyog 。

打开 sqlyog，输入 MariaDB 数据库实例的外网域名和端口号，数据库帐号以及密码。
<ul>
    <li>我的SQL主机地址：输入外网域名。</li>
    <li>用户名：前提条件中创建的用户名。</li>
    <li>密码：用户名对应的密码。</li>
    <li>端口：外网域名对应的端口号。</li>
</ul>

(4)	从 Linux 系统登录

以 CentOS 7.2 64位系统的 CVM 为例，在官网下载安装 MySQL 客户端。具	体命令为：
```apacheconfig
yum intall mysql
```
使用 MySQL 命令行工具登录到 MariaDB 数据库。相关命令为：
```apacheconfig
mysql -h hostname -P port -u username -p
```
请将 hostname 替换为目标 MariaDB 数据库实例的外网域名，username 替换为之前创建的用户名，并在提示 Enter password：后输入用户名对应的密码。














