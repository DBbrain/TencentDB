# 腾讯云Redis数据库的备份和恢复
云数据库 Redis 支持数据的备份与恢复，云数据库后台服务会定期对实例的数据进行备份，备份进行的时间点可以在控制台进行配置，同时还可以在任意时刻执行手动备份，备份数据的格式为对应 Redis 引擎版本的 RDB 文件（Redis 备份文件格式），实例的 RDB 备份文件将存储于腾讯云 COS 系统中，以保证数据的高可靠。云数据库 Redis 支持以回档和克隆的方式恢复实例数据，提供在特定场景的数据恢复和克隆功能。

## 1、数据备份

云数据库 Redis 支持自动备份和手动备份，自动备份允许自定义备份时间窗口。

1.自动备份

云数据库后台服务会定期对实例的数据进行备份，备份周期可通过控制台的【备份与恢复】>【自动备份】查看和配置。

默认情况下会在每天的02:00-08:00期间进行一次全量数据备份，备份文件存储于腾讯云 COS 服务，您可以在云数据库 Redis 控制台的【备份与恢复】中看到每天的备份数据。

备份列表会展示实例的所有备份文件以及备份文件的信息，云数据库 Redis 提供两个备份下载地址，公网下载地址允许您在任意可以访问 Internet 网络的地方下载备份数据，内网下载地址允许您在腾讯云内网下载，内网下载地址不支持跨 Region 下载，只能在 Redis 实例所在的 Region 下载。

2.手动备份

除系统后台定期的生成备份文件以外，您还可以通过云数据库 Redis 控制台进行手动备份，以满足您不同的需求，手动备份的文件将同样展示在控制台的备份列表中，您可以通过备份列表中的备份类型【手动备份】来区分系统自动备份和手动备份。

3.数据恢复

云数据库 Redis 支持基于备份文件来恢复数据，恢复数据支持两种方式：在原实例中恢复数据和通过克隆的方式将备份数据库恢复到一个新的实例中。

4.恢复实例

云数据库 Redis 2.8标准版（社区）、标准版（CKV）、集群版（CKV）支持实例恢复功能，实例恢复将清空原有实例的数据，将指定的备份数据恢复到实例中，恢复期间实例不可访问。您可以在云数据库 Redis 控制台的【备份与恢复】的备份列表中选择相应的备份文件进行恢复。

5.克隆实例

云数据库 Redis 4.0标准版（社区）、集群版（社区）支持实例克隆功能，支持基于备份文件克隆一个完整的新实例，实例的数据和备份文件一致，您可以使用克隆功能来分析以往的数据，也可以通过修改 IP 的方式，交换克隆的新实例和原有实例的 IP 来达到回档的目的。

云数据库 Redis 支持自动备份和手动备份。

### 1.1、自动备份
实例支持每天一次的自动备份，操作步骤如下：
1. 登录 Redis 控制台，在实例列表中，单击实例名称进入实例管理页面。
2. 选择【备份与恢复】 > 【自动备份设置】页，单击【编辑】。
3. 设置备份开始的时间段，单击【保存】。
<br/>**说明：** 备份周期默认全选，不能进行修改。
4. 备份将在指定时间段内开始执行，备份进行时可在任务中心查看任务状态，备份完成后，可在【备份与恢复】中查看已生成的备份。
<br/>**说明：** 如果受相关进程影响，备份也可能会延迟开始。

### 1.2、手动备份
在实例详情页单击右上角的【手动备份】，编辑备注信息，单击【确认】即可。

### 1.3、下载备份
说明：Redis 目前仅支持标准版下载备份文件。
1. 在实例管理页面，选择【备份与恢复】页，在操作列单击【下载】。
2. 在弹出的对话框，复制下载地址或单击【本地下载】，下载备份文件，不支持跨可用区下载。
<br/>**说明：** 内网地址和本地下载地址有效期为12个小时，过期后请重新获取。

## 2、数据恢复

备份完实例数据我们接下来看一下数据恢复：

1. 登录Redis 控制台，在实例列表中，单击实例名称进入实例管理页面。

2. 选择【备份与恢复】页，选中需要恢复的备份，单击【恢复实例】。

3. 在弹出的对话框，输入实例密码，单击【确认】。
<br/>**注意：** 此处需要输入的密码为用户设置的实例密码，并非访问实例时所用的”实例 ID:实例密码“连接密码。
 
返回实例列表，实例状态显示为【按备份Id恢复备份中】，待实例状态显示为【运行中】，



